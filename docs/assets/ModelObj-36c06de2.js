import{j as D,r as at}from"./index-2964918d.js";import{C as et,R as nt,a as ct,b as ft,c as Ct,d as it,D as mt}from"./events-3515660a.esm-f4b6ef04.js";import{C as dt,O as pt}from"./OrbitControls-a4e0d1e9.js";class _t extends et{constructor(d){super(d)}parse(d,E){const t={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},T=542327876,B=131072,M=512,P=1024,R=2048,U=4096,b=8192,g=16384,x=32768,F=4;function _(s){return s.charCodeAt(0)+(s.charCodeAt(1)<<8)+(s.charCodeAt(2)<<16)+(s.charCodeAt(3)<<24)}function I(s){return String.fromCharCode(s&255,s>>8&255,s>>16&255,s>>24&255)}function O(s,f,a,p){const C=a*p*4,r=new Uint8Array(s,f,C),i=new Uint8Array(C);let e=0,n=0;for(let h=0;h<p;h++)for(let S=0;S<a;S++){const tt=r[n];n++;const ot=r[n];n++;const st=r[n];n++;const rt=r[n];n++,i[e]=st,e++,i[e]=ot,e++,i[e]=tt,e++,i[e]=rt,e++}return i}const G=_("DXT1"),X=_("DXT3"),k=_("DXT5"),w=_("ETC1"),y=31,L=0,j=1,V=2,H=3,N=4,Y=7,Z=20,z=21,$=22,q=23,J=24,K=25,Q=26,W=28,o=new Int32Array(d,0,y);if(o[L]!==T)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),t;if(!o[Z]&F)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),t;let m;const u=o[z];let A=!1;switch(u){case G:m=8,t.format=it;break;case X:m=16,t.format=Ct;break;case k:m=16,t.format=ft;break;case w:m=8,t.format=ct;break;default:if(o[$]===32&&o[q]&16711680&&o[J]&65280&&o[K]&255&&o[Q]&4278190080)A=!0,m=64,t.format=nt;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",I(u)),t}t.mipmapCount=1,o[V]&B&&E!==!1&&(t.mipmapCount=Math.max(1,o[Y]));const c=o[W];if(t.isCubemap=!!(c&M),t.isCubemap&&(!(c&P)||!(c&R)||!(c&U)||!(c&b)||!(c&g)||!(c&x)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),t;t.width=o[N],t.height=o[H];let l=o[j]+4;const v=t.isCubemap?6:1;for(let s=0;s<v;s++){let f=t.width,a=t.height;for(let p=0;p<t.mipmapCount;p++){let C,r;A?(C=O(d,l,f,a),r=C.length):(r=Math.max(4,f)/4*Math.max(4,a)/4*m,C=new Uint8Array(d,l,r));const i={data:C,width:f,height:a};t.mipmaps.push(i),l+=r,f=Math.max(f>>1,1),a=Math.max(a>>1,1)}}return t}}mt.addHandler(/\.dds$/i,new _t);function ht(){return D.jsx("div",{className:"ModelObj",children:D.jsx(dt,{children:D.jsx(at.Suspense,{fallback:null,children:D.jsx(pt,{})})})})}export{ht as default};
//# sourceMappingURL=ModelObj-36c06de2.js.map
